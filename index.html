<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chalé Restaurante - Marmitex</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2c5530;
            --primary-dark: #1e3a23;
            --secondary: #4a7c59;
            --accent: #f8b500;
            --accent-dark: #e0a500;
            --light: #f8f9fa;
            --dark: #343a40;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --danger: #dc3545;
            --success: #28a745;
            --warning: #ffc107;
            --border-radius: 8px;
            --box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 1.2rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo-icon {
            font-size: 1.8rem;
        }
        
        .logo-text {
            font-size: 1.6rem;
            font-weight: 700;
        }
        
        .logo-subtitle {
            font-size: 0.8rem;
            opacity: 0.8;
            margin-top: -5px;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 1.5rem;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            padding: 0.5rem 1rem;
            border-radius: 4px;
        }
        
        nav a:hover, nav a.active {
            background-color: rgba(255,255,255,0.1);
        }
        
        .page {
            display: none;
            padding: 2rem 0;
            min-height: calc(100vh - 180px);
        }
        
        .page.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 1.8rem;
            margin-bottom: 1.8rem;
            transition: var(--transition);
        }
        
        .card:hover {
            box-shadow: 0 6px 16px rgba(0,0,0,0.12);
        }
        
        h1, h2, h3, h4 {
            margin-bottom: 1.2rem;
            color: var(--primary);
        }
        
        h1 {
            font-size: 2.2rem;
            position: relative;
            padding-bottom: 0.5rem;
        }
        
        h1:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 4px;
            background-color: var(--accent);
            border-radius: 2px;
        }
        
        h2 {
            font-size: 1.6rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        h2 i {
            color: var(--accent);
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 0.8rem 1.8rem;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            text-decoration: none;
            font-size: 1rem;
        }
        
        .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .btn-accent {
            background-color: var(--accent);
            color: var(--dark);
        }
        
        .btn-accent:hover {
            background-color: var(--accent-dark);
        }
        
        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }
        
        .btn-outline:hover {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-danger {
            background-color: var(--danger);
        }
        
        .btn-danger:hover {
            background-color: #c82333;
        }
        
        .btn-success {
            background-color: var(--success);
        }
        
        .btn-success:hover {
            background-color: #218838;
        }
        
        .btn-lg {
            padding: 1rem 2.2rem;
            font-size: 1.1rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.6rem;
            font-weight: 600;
            color: var(--dark);
        }
        
        .required:after {
            content: ' *';
            color: var(--danger);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 0.9rem;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(44, 85, 48, 0.1);
        }
        
        .step-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 2.5rem;
            position: relative;
        }
        
        .step-indicator:before {
            content: '';
            position: absolute;
            top: 20px;
            left: 50px;
            right: 50px;
            height: 2px;
            background-color: var(--light-gray);
            z-index: 1;
        }
        
        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
            width: 120px;
        }
        
        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--light-gray);
            color: var(--gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-bottom: 0.5rem;
            transition: var(--transition);
        }
        
        .step.active .step-number {
            background-color: var(--primary);
            color: white;
        }
        
        .step.completed .step-number {
            background-color: var(--success);
            color: white;
        }
        
        .step-text {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--gray);
            text-align: center;
        }
        
        .step.active .step-text {
            color: var(--primary);
        }
        
        .step.completed .step-text {
            color: var(--success);
        }
        
        .marmita-quantity {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 1.5rem;
        }
        
        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .quantity-btn {
            width: 50px;
            height: 50px;
            background-color: var(--light-gray);
            border: none;
            border-radius: 50%;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        
        .quantity-btn:hover {
            background-color: var(--primary);
            color: white;
        }
        
        .quantity-display {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            min-width: 80px;
            text-align: center;
        }
        
        .marmita-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .marmita-option {
            border: 2px solid var(--light-gray);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }
        
        .marmita-option:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
        }
        
        .marmita-option.selected {
            border-color: var(--primary);
            background-color: rgba(44, 85, 48, 0.05);
            position: relative;
        }
        
        .marmita-option.selected:after {
            content: '✓';
            position: absolute;
            top: -12px;
            right: -12px;
            width: 30px;
            height: 30px;
            background-color: var(--success);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .marmita-size {
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }
        
        .marmita-price {
            font-weight: 700;
            color: var(--secondary);
            font-size: 1.3rem;
        }
        
        .customization-section {
            margin-bottom: 2rem;
        }
        
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 1.2rem;
        }
        
        .option-item {
            border: 2px solid var(--light-gray);
            border-radius: var(--border-radius);
            padding: 1.2rem;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }
        
        .option-item:hover {
            border-color: var(--primary);
        }
        
        .option-item.selected {
            border-color: var(--primary);
            background-color: rgba(44, 85, 48, 0.05);
        }
        
        .bebida-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.8rem;
        }
        
        .bebida-controls {
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        
        .bebida-quantity {
            font-weight: 700;
            min-width: 30px;
            text-align: center;
        }
        
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.2rem 0;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .cart-item:last-child {
            border-bottom: none;
        }
        
        .cart-item-details {
            flex-grow: 1;
        }
        
        .cart-item-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .quantity-control {
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        
        .quantity {
            font-weight: 700;
            min-width: 30px;
            text-align: center;
        }
        
        .total {
            font-weight: 700;
            font-size: 1.4rem;
            text-align: right;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 2px solid var(--light-gray);
            color: var(--primary);
        }
        
        .admin-section {
            margin-bottom: 2.5rem;
        }
        
        .admin-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }
        
        .menu-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1.5rem;
        }
        
        .menu-item {
            border: 1px solid var(--light-gray);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            transition: var(--transition);
        }
        
        .menu-item:hover {
            border-color: var(--primary);
        }
        
        .menu-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.8rem;
        }
        
        .menu-item-name {
            font-weight: 700;
            font-size: 1.1rem;
        }
        
        .menu-item-price {
            color: var(--secondary);
            font-weight: 700;
        }
        
        .menu-item-actions {
            display: flex;
            gap: 0.8rem;
            margin-top: 1rem;
        }
        
        .hidden {
            display: none !important;
        }
        
        .alert {
            padding: 1.2rem;
            border-radius: var(--border-radius);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .alert-success {
            background-color: rgba(40, 167, 69, 0.1);
            border: 1px solid var(--success);
            color: var(--success);
        }
        
        .alert-danger {
            background-color: rgba(220, 53, 69, 0.1);
            border: 1px solid var(--danger);
            color: var(--danger);
        }
        
        .alert-warning {
            background-color: rgba(255, 193, 7, 0.1);
            border: 1px solid var(--warning);
            color: #856404;
        }
        
        .order-summary {
            background-color: var(--light-gray);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin-bottom: 1.8rem;
        }
        
        .order-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.8rem;
            padding-bottom: 0.8rem;
            border-bottom: 1px solid #ddd;
        }
        
        .order-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .payment-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .payment-option {
            text-align: center;
            padding: 1.5rem;
            border: 2px solid var(--light-gray);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
        }
        
        .payment-option:hover {
            border-color: var(--primary);
        }
        
        .payment-option.selected {
            border-color: var(--primary);
            background-color: rgba(44, 85, 48, 0.05);
        }
        
        .payment-icon {
            font-size: 2rem;
            margin-bottom: 0.8rem;
            color: var(--primary);
        }
        
        .troco-option {
            margin-top: 1rem;
        }
        
        .actions {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }
        
        .delivery-notice {
            background-color: rgba(248, 181, 0, 0.1);
            border: 1px solid var(--accent);
            border-radius: var(--border-radius);
            padding: 1rem;
            margin-bottom: 1.5rem;
            text-align: center;
            font-weight: 600;
        }
        
        footer {
            background-color: var(--dark);
            color: white;
            padding: 2rem 0;
            margin-top: 3rem;
        }
        
        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .footer-info {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        /* Novos estilos para melhorar a personalização */
        .marmita-progress {
            display: flex;
            justify-content: center;
            margin-bottom: 1.5rem;
            gap: 0.5rem;
        }
        
        .marmita-progress-item {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .marmita-progress-item.active {
            background-color: var(--primary);
            color: white;
        }
        
        .marmita-progress-item.completed {
            background-color: var(--success);
            color: white;
        }
        
        .marmita-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
        }
        
        .marmita-completion-status {
            text-align: center;
            margin: 1rem 0;
            font-weight: 600;
            color: var(--primary);
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
                gap: 1rem;
            }
            
            nav ul {
                gap: 0.8rem;
            }
            
            .step-indicator:before {
                left: 30px;
                right: 30px;
            }
            
            .step {
                width: 90px;
            }
            
            .marmita-options, .options-grid, .payment-options {
                grid-template-columns: 1fr;
            }
            
            .admin-controls {
                flex-direction: column;
            }
            
            .actions {
                flex-direction: column;
                gap: 1rem;
            }
            
            .footer-content {
                flex-direction: column;
                gap: 1.5rem;
                text-align: center;
            }
            
            .marmita-navigation {
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <div>
                        <div class="logo-text">Chalé Restaurante</div>
                        <div class="logo-subtitle">Marmitex de qualidade</div>
                    </div>
                </div>
                <nav>
                    <ul>
                        <li><a href="#" class="nav-link active" data-page="home">Início</a></li>
                        <li><a href="#" class="nav-link" data-page="orders">Fazer Pedido</a></li>
                        <li><a href="#" class="nav-link" data-page="admin">Administrativo</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Página Inicial -->
        <section id="home" class="page active">
            <div class="card">
                <h1>Bem-vindo ao Chalé Restaurante</h1>
                <p>Oferecemos marmitex de comida caseira com ingredientes frescos e saborosos. Personalize seu pedido conforme sua preferência.</p>
                
                <div class="delivery-notice">
                    <i class="fas fa-info-circle"></i> Entregas apenas no Centro
                </div>
                
                <div class="features" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin: 2rem 0;">
                    <div style="text-align: center; padding: 1.5rem;">
                        <i class="fas fa-utensil-spoon" style="font-size: 2.5rem; color: var(--primary); margin-bottom: 1rem;"></i>
                        <h3>Marmitas Personalizadas</h3>
                        <p>Escolha entre marmita pequena ou grande e monte com seus ingredientes favoritos.</p>
                    </div>
                    <div style="text-align: center; padding: 1.5rem;">
                        <i class="fas fa-truck" style="font-size: 2.5rem; color: var(--primary); margin-bottom: 1rem;"></i>
                        <h3>Entrega Rápida</h3>
                        <p>Entregamos no Centro em até 40 minutos.</p>
                    </div>
                    <div style="text-align: center; padding: 1.5rem;">
                        <i class="fas fa-credit-card" style="font-size: 2.5rem; color: var(--primary); margin-bottom: 1rem;"></i>
                        <h3>Várias Formas de Pagar</h3>
                        <p>Aceitamos Cartão, Dinheiro e PIX.</p>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 2rem;">
                    <button id="start-order" class="btn btn-lg">
                        <i class="fas fa-shopping-cart"></i> Fazer Pedido Agora
                    </button>
                </div>
            </div>
        </section>

        <!-- Página de Pedidos -->
        <section id="orders" class="page">
            <div class="card">
                <h1>Monte seu pedido</h1>
                
                <!-- Indicador de Etapas -->
                <div class="step-indicator">
                    <div class="step active" id="step1">
                        <div class="step-number">1</div>
                        <div class="step-text">Quantidade</div>
                    </div>
                    <div class="step" id="step2">
                        <div class="step-number">2</div>
                        <div class="step-text">Personalizar</div>
                    </div>
                    <div class="step" id="step3">
                        <div class="step-number">3</div>
                        <div class="step-text">Bebidas</div>
                    </div>
                    <div class="step" id="step4">
                        <div class="step-number">4</div>
                        <div class="step-text">Resumo</div>
                    </div>
                    <div class="step" id="step5">
                        <div class="step-number">5</div>
                        <div class="step-text">Checkout</div>
                    </div>
                </div>
                
                <!-- Etapa 1: Quantidade de Marmitas -->
                <div id="etapa-quantidade" class="order-step">
                    <h2><i class="fas fa-calculator"></i> Quantas marmitas você deseja?</h2>
                    
                    <div class="marmita-quantity">
                        <div class="quantity-controls">
                            <button class="quantity-btn" id="decrease-quantity">-</button>
                            <div class="quantity-display" id="quantity-display">1</div>
                            <button class="quantity-btn" id="increase-quantity">+</button>
                        </div>
                        <p>Você escolherá o tamanho e poderá personalizar cada marmita individualmente na próxima etapa.</p>
                        <button id="next-to-customization" class="btn btn-lg">
                            <i class="fas fa-arrow-right"></i> Personalizar Marmitas
                        </button>
                    </div>
                </div>
                
                <!-- Etapa 2: Personalização das Marmitas -->
                <div id="etapa-personalizacao" class="order-step hidden">
                    <h2><i class="fas fa-edit"></i> Personalize suas marmitas</h2>
                    
                    <!-- Indicador de progresso das marmitas -->
                    <div class="marmita-progress" id="marmita-progress">
                        <!-- Será preenchido via JavaScript -->
                    </div>
                    
                    <div class="marmita-completion-status" id="marmita-completion-status">
                        <!-- Status de conclusão será preenchido via JavaScript -->
                    </div>
                    
                    <div class="marmita-options" id="marmita-options">
                        <!-- Opções de tamanho serão preenchidas via JavaScript -->
                    </div>
                    
                    <div id="marmita-customization">
                        <h3>Escolha os componentes</h3>
                        <div id="customization-sections">
                            <!-- As seções de personalização serão preenchidas via JavaScript -->
                        </div>
                        
                        <div class="marmita-navigation">
                            <button id="prev-to-quantity" class="btn btn-outline">
                                <i class="fas fa-arrow-left"></i> Voltar
                            </button>
                            
                            <div>
                                <button id="prev-marmita" class="btn btn-outline">
                                    <i class="fas fa-chevron-left"></i> Marmita Anterior
                                </button>
                                <button id="next-marmita" class="btn">
                                    Próxima Marmita <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                            
                            <button id="next-to-bebidas" class="btn">
                                <i class="fas fa-arrow-right"></i> Continuar para Bebidas
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Etapa 3: Seleção de Bebidas -->
                <div id="etapa-bebidas" class="order-step hidden">
                    <h2><i class="fas fa-wine-bottle"></i> Escolha suas bebidas</h2>
                    <p>Selecione as bebidas que deseja adicionar ao pedido (opcional)</p>
                    
                    <div class="options-grid" id="bebidas-options">
                        <!-- As opções de bebidas serão preenchidas via JavaScript -->
                    </div>

                    <div style="text-align: center; margin-top: 1.5rem;">
                        <button id="no-bebidas" class="btn btn-outline">
                            <i class="fas fa-times"></i> Não desejo bebidas
                        </button>
                    </div>
                    
                    <div class="actions">
                        <button id="prev-to-customization" class="btn btn-outline">
                            <i class="fas fa-arrow-left"></i> Voltar
                        </button>
                        <button id="next-to-resumo" class="btn">
                            <i class="fas fa-arrow-right"></i> Ver Resumo do Pedido
                        </button>
                    </div>
                </div>
                
                <!-- Etapa 4: Resumo do Pedido -->
                <div id="etapa-resumo" class="order-step hidden">
                    <h2><i class="fas fa-clipboard-list"></i> Resumo do Pedido</h2>
                    
                    <div class="order-summary" id="order-summary-content">
                        <!-- O resumo será preenchido via JavaScript -->
                    </div>
                    
                    <div class="actions">
                        <button id="prev-to-bebidas" class="btn btn-outline">
                            <i class="fas fa-arrow-left"></i> Voltar
                        </button>
                        <button id="next-to-checkout" class="btn">
                            <i class="fas fa-arrow-right"></i> Finalizar Pedido
                        </button>
                    </div>
                </div>
                
                <!-- Etapa 5: Checkout -->
                <div id="etapa-checkout" class="order-step hidden">
                    <h2><i class="fas fa-credit-card"></i> Finalizar Pedido</h2>
                    
                    <form id="checkout-form">
                        <div class="form-group">
                            <label for="customer-name" class="required">Nome completo:</label>
                            <input type="text" id="customer-name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="customer-phone">Telefone (opcional):</label>
                            <input type="tel" id="customer-phone">
                        </div>
                        
                        <div class="form-group">
                            <label>Tipo de entrega:</label>
                            <div style="display: flex; gap: 2rem; margin-top: 0.5rem;">
                                <div>
                                    <input type="radio" id="delivery-type-pickup" name="delivery-type" value="retirada" checked>
                                    <label for="delivery-type-pickup">Retirada no local</label>
                                </div>
                                
                                <div>
                                    <input type="radio" id="delivery-type-delivery" name="delivery-type" value="entrega">
                                    <label for="delivery-type-delivery">Entrega</label>
                                </div>
                            </div>
                        </div>
                        
                        <div id="delivery-address" class="hidden">
                            <div class="form-group">
                                <label for="customer-address" class="required">Endereço de entrega:</label>
                                <textarea id="customer-address" rows="3" required></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="customer-reference">Ponto de referência (opcional):</label>
                                <input type="text" id="customer-reference">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="required">Forma de pagamento:</label>
                            <div class="payment-options">
                                <div class="payment-option" data-payment="dinheiro">
                                    <div class="payment-icon">
                                        <i class="fas fa-money-bill-wave"></i>
                                    </div>
                                    <span>Dinheiro</span>
                                </div>
                                <div class="payment-option" data-payment="cartao">
                                    <div class="payment-icon">
                                        <i class="fas fa-credit-card"></i>
                                    </div>
                                    <span>Cartão</span>
                                </div>
                                <div class="payment-option" data-payment="pix">
                                    <div class="payment-icon">
                                        <i class="fas fa-qrcode"></i>
                                    </div>
                                    <span>PIX</span>
                                </div>
                            </div>
                            <input type="hidden" id="payment-method" required>
                        </div>
                        
                        <div id="troco-section" class="form-group hidden">
                            <label for="troco-para">Precisa de troco para quanto?</label>
                            <input type="number" id="troco-para" step="0.01" min="0" placeholder="Ex: 50.00">
                        </div>
                        
                        <div class="actions">
                            <button type="button" id="prev-to-resumo" class="btn btn-outline">
                                <i class="fas fa-arrow-left"></i> Voltar
                            </button>
                            <button type="submit" class="btn btn-lg">
                                <i class="fab fa-whatsapp"></i> Enviar Pedido para WhatsApp
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Página Administrativa -->
        <section id="admin" class="page">
            <div class="card">
                <h1>Painel Administrativo</h1>
                
                <!-- Login Admin -->
                <div id="admin-login">
                    <div class="form-group">
                        <label for="admin-password">Senha de acesso:</label>
                        <input type="password" id="admin-password" placeholder="Digite a senha administrativa">
                    </div>
                    <button id="login-admin" class="btn">
                        <i class="fas fa-lock"></i> Acessar Painel
                    </button>
                </div>
                
                <!-- Conteúdo Admin -->
                <div id="admin-content" class="hidden">
                    <div class="admin-section">
                        <h2><i class="fas fa-cog"></i> Configurações de Preços</h2>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                            <div class="form-group">
                                <label for="price-small">Preço Marmita Pequena:</label>
                                <input type="number" id="price-small" step="0.01" min="0">
                            </div>
                            <div class="form-group">
                                <label for="price-large">Preço Marmita Grande:</label>
                                <input type="number" id="price-large" step="0.01" min="0">
                            </div>
                            <div class="form-group">
                                <label for="delivery-fee">Taxa de Entrega:</label>
                                <input type="number" id="delivery-fee" step="0.01" min="0">
                            </div>
                        </div>
                        <button id="save-prices" class="btn">
                            <i class="fas fa-save"></i> Salvar Preços
                        </button>
                    </div>
                    
                    <div class="admin-section">
                        <h2><i class="fas fa-utensils"></i> Gerenciar Cardápio</h2>
                        
                        <div class="admin-controls">
                            <select id="category-select">
                                <option value="arroz">Arroz</option>
                                <option value="feijao">Feijão</option>
                                <option value="guarnicoes">Guarnições</option>
                                <option value="carnes">Carnes</option>
                                <option value="bebidas">Bebidas</option>
                            </select>
                            <input type="text" id="new-item-name" placeholder="Nome do item">
                            <input type="number" id="new-item-price" step="0.01" min="0" placeholder="Preço (apenas bebidas)">
                            <button id="add-item" class="btn">
                                <i class="fas fa-plus"></i> Adicionar Item
                            </button>
                        </div>
                        
                        <div id="menu-items-container">
                            <!-- Itens do cardápio serão preenchidos via JavaScript -->
                        </div>
                    </div>
                    
                    <div class="admin-section">
                        <h2><i class="fas fa-clipboard-check"></i> Pedidos Recebidos</h2>
                        <div id="orders-list">
                            <!-- Lista de pedidos será preenchida via JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-info">
                    <div style="font-weight: 700; font-size: 1.2rem;">Chalé Restaurante</div>
                    <div>Entregas apenas no Centro</div>
                </div>
                <div class="footer-info">
                    <div><i class="fas fa-phone"></i> (31) 99872-5041</div>
                    <div><i class="fas fa-map-marker-alt"></i> Endereço: Centro</div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Dados iniciais
        let menuData = {
            prices: {
                small: 15.00,
                large: 22.00,
                delivery: 5.00
            },
            categories: {
                arroz: ["Arroz Branco", "Arroz Integral"],
                feijao: ["Feijão Carioca", "Feijão Preto"],
                guarnicoes: ["Batata Frita", "Salada de Alface", "Farofa", "Vinagrete", "Purê de Batata"],
                carnes: ["Frango Grelhado", "Carne de Panela", "Linguiça", "Bife", "Peixe"],
                bebidas: [
                    { name: "Coca-Cola 350ml", price: 5.00 },
                    { name: "Guaraná 350ml", price: 4.50 },
                    { name: "Suco de Laranja 500ml", price: 7.00 },
                    { name: "Água Mineral 500ml", price: 3.00 }
                ]
            },
            orders: []
        };

        // Estado atual do pedido
        let currentOrder = {
            marmitas: [],
            bebidas: [],
            customerInfo: {},
            total: 0
        };

        // Variáveis de controle
        let currentMarmitaIndex = 0;
        let marmitaQuantity = 1;

        // Elementos da página
        const pages = document.querySelectorAll('.page');
        const navLinks = document.querySelectorAll('.nav-link');
        const startOrderBtn = document.getElementById('start-order');
        const steps = document.querySelectorAll('.step');
        const orderSteps = document.querySelectorAll('.order-step');
        
        // Elementos da etapa de quantidade
        const decreaseQuantityBtn = document.getElementById('decrease-quantity');
        const increaseQuantityBtn = document.getElementById('increase-quantity');
        const quantityDisplay = document.getElementById('quantity-display');
        const nextToCustomizationBtn = document.getElementById('next-to-customization');
        
        // Elementos da etapa de personalização
        const etapaPersonalizacao = document.getElementById('etapa-personalizacao');
        const marmitaProgress = document.getElementById('marmita-progress');
        const marmitaCompletionStatus = document.getElementById('marmita-completion-status');
        const marmitaOptionsContainer = document.getElementById('marmita-options');
        const customizationSections = document.getElementById('customization-sections');
        const prevToQuantityBtn = document.getElementById('prev-to-quantity');
        const prevMarmitaBtn = document.getElementById('prev-marmita');
        const nextMarmitaBtn = document.getElementById('next-marmita');
        const nextToBebidasBtn = document.getElementById('next-to-bebidas');
        
        // Elementos da etapa de bebidas
        const etapaBebidas = document.getElementById('etapa-bebidas');
        const bebidasOptionsContainer = document.getElementById('bebidas-options');
        const noBebidasBtn = document.getElementById('no-bebidas');
        const prevToCustomizationBtn = document.getElementById('prev-to-customization');
        const nextToResumoBtn = document.getElementById('next-to-resumo');
        
        // Elementos da etapa de resumo
        const etapaResumo = document.getElementById('etapa-resumo');
        const orderSummaryContent = document.getElementById('order-summary-content');
        const prevToBebidasBtn = document.getElementById('prev-to-bebidas');
        const nextToCheckoutBtn = document.getElementById('next-to-checkout');
        
        // Elementos da etapa de checkout
        const etapaCheckout = document.getElementById('etapa-checkout');
        const checkoutForm = document.getElementById('checkout-form');
        const deliveryTypeRadios = document.querySelectorAll('input[name="delivery-type"]');
        const deliveryAddress = document.getElementById('delivery-address');
        const paymentOptions = document.querySelectorAll('.payment-option');
        const paymentMethodInput = document.getElementById('payment-method');
        const trocoSection = document.getElementById('troco-section');
        const prevToResumoBtn = document.getElementById('prev-to-resumo');
        
        // Elementos administrativos
        const adminLogin = document.getElementById('admin-login');
        const adminContent = document.getElementById('admin-content');
        const loginAdminBtn = document.getElementById('login-admin');
        const savePricesBtn = document.getElementById('save-prices');
        const categorySelect = document.getElementById('category-select');
        const addItemBtn = document.getElementById('add-item');
        const menuItemsContainer = document.getElementById('menu-items-container');
        const ordersList = document.getElementById('orders-list');

        // Carregar dados do localStorage
        function loadData() {
            const savedData = localStorage.getItem('chaléRestauranteData');
            if (savedData) {
                menuData = JSON.parse(savedData);
            }
        }

        // Salvar dados no localStorage
        function saveData() {
            localStorage.setItem('chaléRestauranteData', JSON.stringify(menuData));
        }

        // Navegação entre páginas
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetPage = link.getAttribute('data-page');
                
                // Atualizar navegação ativa
                navLinks.forEach(nav => nav.classList.remove('active'));
                link.classList.add('active');
                
                // Mostrar página selecionada
                pages.forEach(page => {
                    page.classList.remove('active');
                });
                
                document.getElementById(targetPage).classList.add('active');
                
                // Se for para a página de pedidos, reiniciar o fluxo
                if (targetPage === 'orders') {
                    resetOrderFlow();
                }
            });
        });

        // Iniciar pedido
        startOrderBtn.addEventListener('click', () => {
            document.getElementById('home').classList.remove('active');
            document.getElementById('orders').classList.add('active');
            
            // Atualizar navegação
            navLinks.forEach(nav => nav.classList.remove('active'));
            document.querySelector('[data-page="orders"]').classList.add('active');
            
            resetOrderFlow();
        });

        // Resetar fluxo do pedido
        function resetOrderFlow() {
            currentOrder = {
                marmitas: [],
                bebidas: [],
                customerInfo: {},
                total: 0
            };
            
            currentMarmitaIndex = 0;
            marmitaQuantity = 1;
            quantityDisplay.textContent = marmitaQuantity;
            
            // Resetar etapas
            orderSteps.forEach(step => step.classList.add('hidden'));
            document.getElementById('etapa-quantidade').classList.remove('hidden');
            
            // Resetar indicador de etapas
            steps.forEach(step => {
                step.classList.remove('active', 'completed');
            });
            document.getElementById('step1').classList.add('active');
            
            // Resetar formulário
            checkoutForm.reset();
            deliveryAddress.classList.add('hidden');
            trocoSection.classList.add('hidden');
            
            // Resetar seleções de pagamento
            paymentOptions.forEach(option => option.classList.remove('selected'));
            paymentMethodInput.value = '';
        }

        // Controle de quantidade de marmitas
        decreaseQuantityBtn.addEventListener('click', () => {
            if (marmitaQuantity > 1) {
                marmitaQuantity--;
                quantityDisplay.textContent = marmitaQuantity;
            }
        });

        increaseQuantityBtn.addEventListener('click', () => {
            marmitaQuantity++;
            quantityDisplay.textContent = marmitaQuantity;
        });

        // Avançar para personalização
        nextToCustomizationBtn.addEventListener('click', () => {
            document.getElementById('etapa-quantidade').classList.add('hidden');
            etapaPersonalizacao.classList.remove('hidden');
            
            // Atualizar indicador de etapas
            document.getElementById('step1').classList.remove('active');
            document.getElementById('step1').classList.add('completed');
            document.getElementById('step2').classList.add('active');
            
            // Inicializar marmitas
            currentOrder.marmitas = [];
            for (let i = 0; i < marmitaQuantity; i++) {
                currentOrder.marmitas.push({
                    size: '',
                    price: 0,
                    arroz: '',
                    feijao: '',
                    guarnicoes: [],
                    carne: ''
                });
            }
            
            // Atualizar contador
            currentMarmitaIndex = 0;
            updateMarmitaProgress();
            
            // Carregar opções de personalização
            loadMarmitaOptions();
        });

        // Atualizar indicador de progresso das marmitas
        function updateMarmitaProgress() {
            marmitaProgress.innerHTML = '';
            
            for (let i = 0; i < marmitaQuantity; i++) {
                const progressItem = document.createElement('div');
                progressItem.className = 'marmita-progress-item';
                progressItem.textContent = i + 1;
                
                if (i === currentMarmitaIndex) {
                    progressItem.classList.add('active');
                } else if (currentOrder.marmitas[i].size && 
                           currentOrder.marmitas[i].arroz && 
                           currentOrder.marmitas[i].feijao && 
                           currentOrder.marmitas[i].guarnicoes.length === 2 && 
                           currentOrder.marmitas[i].carne) {
                    progressItem.classList.add('completed');
                }
                
                progressItem.addEventListener('click', () => {
                    if (i !== currentMarmitaIndex) {
                        currentMarmitaIndex = i;
                        updateMarmitaProgress();
                        loadMarmitaOptions();
                    }
                });
                
                marmitaProgress.appendChild(progressItem);
            }
            
            // Atualizar status de conclusão
            const completedCount = currentOrder.marmitas.filter(m => 
                m.size && m.arroz && m.feijao && m.guarnicoes.length === 2 && m.carne
            ).length;
            
            marmitaCompletionStatus.textContent = 
                `Marmita ${currentMarmitaIndex + 1} de ${marmitaQuantity} - ${completedCount}/${marmitaQuantity} completas`;
            
            // Atualizar visibilidade dos botões de navegação
            prevMarmitaBtn.style.display = currentMarmitaIndex > 0 ? 'inline-flex' : 'none';
            nextMarmitaBtn.style.display = currentMarmitaIndex < marmitaQuantity - 1 ? 'inline-flex' : 'none';
            nextToBebidasBtn.style.display = completedCount === marmitaQuantity ? 'inline-flex' : 'none';
        }

        // Carregar opções de tamanho de marmita
        function loadMarmitaOptions() {
            marmitaOptionsContainer.innerHTML = '';
            
            const smallOption = document.createElement('div');
            smallOption.className = 'marmita-option';
            smallOption.innerHTML = `
                <div class="marmita-size">Pequena</div>
                <p>Ideal para uma refeição completa</p>
                <div class="marmita-price">R$ ${menuData.prices.small.toFixed(2)}</div>
            `;
            smallOption.addEventListener('click', () => selectMarmitaSize('small'));
            
            const largeOption = document.createElement('div');
            largeOption.className = 'marmita-option';
            largeOption.innerHTML = `
                <div class="marmita-size">Grande</div>
                <p>Porção generosa para quem tem mais fome</p>
                <div class="marmita-price">R$ ${menuData.prices.large.toFixed(2)}</div>
            `;
            largeOption.addEventListener('click', () => selectMarmitaSize('large'));
            
            marmitaOptionsContainer.appendChild(smallOption);
            marmitaOptionsContainer.appendChild(largeOption);
            
            // Verificar se já há uma seleção para esta marmita
            if (currentOrder.marmitas[currentMarmitaIndex].size) {
                const selectedSize = currentOrder.marmitas[currentMarmitaIndex].size;
                const options = marmitaOptionsContainer.querySelectorAll('.marmita-option');
                if (selectedSize === 'small') {
                    options[0].classList.add('selected');
                } else {
                    options[1].classList.add('selected');
                }
                
                // Carregar personalização se já houver tamanho selecionado
                loadCustomizationOptions();
            }
        }

        // Selecionar tamanho da marmita
        function selectMarmitaSize(size) {
            // Remover seleção anterior
            document.querySelectorAll('.marmita-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Adicionar seleção atual
            event.target.closest('.marmita-option').classList.add('selected');
            
            // Atualizar marmita atual
            currentOrder.marmitas[currentMarmitaIndex].size = size;
            currentOrder.marmitas[currentMarmitaIndex].price = size === 'small' ? menuData.prices.small : menuData.prices.large;
            
            // Carregar opções de personalização
            loadCustomizationOptions();
        }

        // Carregar opções de personalização
        function loadCustomizationOptions() {
            customizationSections.innerHTML = '';
            
            // Arroz
            const arrozSection = document.createElement('div');
            arrozSection.className = 'customization-section';
            arrozSection.innerHTML = `<h4>Escolha o Arroz</h4>`;
            
            const arrozOptions = document.createElement('div');
            arrozOptions.className = 'options-grid';
            
            menuData.categories.arroz.forEach(item => {
                const option = document.createElement('div');
                option.className = 'option-item';
                option.textContent = item;
                option.addEventListener('click', () => selectOption('arroz', item, option));
                arrozOptions.appendChild(option);
                
                // Verificar se este item já está selecionado
                if (currentOrder.marmitas[currentMarmitaIndex].arroz === item) {
                    option.classList.add('selected');
                }
            });
            
            arrozSection.appendChild(arrozOptions);
            customizationSections.appendChild(arrozSection);
            
            // Feijão
            const feijaoSection = document.createElement('div');
            feijaoSection.className = 'customization-section';
            feijaoSection.innerHTML = `<h4>Escolha o Feijão</h4>`;
            
            const feijaoOptions = document.createElement('div');
            feijaoOptions.className = 'options-grid';
            
            menuData.categories.feijao.forEach(item => {
                const option = document.createElement('div');
                option.className = 'option-item';
                option.textContent = item;
                option.addEventListener('click', () => selectOption('feijao', item, option));
                feijaoOptions.appendChild(option);
                
                // Verificar se este item já está selecionado
                if (currentOrder.marmitas[currentMarmitaIndex].feijao === item) {
                    option.classList.add('selected');
                }
            });
            
            feijaoSection.appendChild(feijaoOptions);
            customizationSections.appendChild(feijaoSection);
            
            // Guarnições (2 opções)
            const guarnicoesSection = document.createElement('div');
            guarnicoesSection.className = 'customization-section';
            guarnicoesSection.innerHTML = `<h4>Escolha 2 Guarnições</h4>`;
            
            const guarnicoesOptions = document.createElement('div');
            guarnicoesOptions.className = 'options-grid';
            
            menuData.categories.guarnicoes.forEach(item => {
                const option = document.createElement('div');
                option.className = 'option-item';
                option.textContent = item;
                option.addEventListener('click', () => selectGuarnicao(item, option));
                guarnicoesOptions.appendChild(option);
                
                // Verificar se este item já está selecionado
                if (currentOrder.marmitas[currentMarmitaIndex].guarnicoes.includes(item)) {
                    option.classList.add('selected');
                }
            });
            
            guarnicoesSection.appendChild(guarnicoesOptions);
            customizationSections.appendChild(guarnicoesSection);
            
            // Carnes
            const carnesSection = document.createElement('div');
            carnesSection.className = 'customization-section';
            carnesSection.innerHTML = `<h4>Escolha a Carne</h4>`;
            
            const carnesOptions = document.createElement('div');
            carnesOptions.className = 'options-grid';
            
            menuData.categories.carnes.forEach(item => {
                const option = document.createElement('div');
                option.className = 'option-item';
                option.textContent = item;
                option.addEventListener('click', () => selectOption('carne', item, option));
                carnesOptions.appendChild(option);
                
                // Verificar se este item já está selecionado
                if (currentOrder.marmitas[currentMarmitaIndex].carne === item) {
                    option.classList.add('selected');
                }
            });
            
            carnesSection.appendChild(carnesOptions);
            customizationSections.appendChild(carnesSection);
            
            // Atualizar progresso após carregar as opções
            updateMarmitaProgress();
        }

        // Selecionar opção (arroz, feijão, carne)
        function selectOption(category, item, element) {
            // Remover seleção anterior na mesma categoria
            const parent = element.parentElement;
            parent.querySelectorAll('.option-item').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Selecionar nova opção
            element.classList.add('selected');
            currentOrder.marmitas[currentMarmitaIndex][category] = item;
            
            // Atualizar progresso
            updateMarmitaProgress();
        }

        // Selecionar guarnição
        function selectGuarnicao(item, element) {
            const currentGuarnicoes = currentOrder.marmitas[currentMarmitaIndex].guarnicoes;
            
            if (element.classList.contains('selected')) {
                element.classList.remove('selected');
                const index = currentGuarnicoes.indexOf(item);
                if (index > -1) {
                    currentGuarnicoes.splice(index, 1);
                }
            } else {
                if (currentGuarnicoes.length < 2) {
                    element.classList.add('selected');
                    currentGuarnicoes.push(item);
                } else {
                    alert('Você só pode selecionar 2 guarnições');
                }
            }
            
            // Atualizar progresso
            updateMarmitaProgress();
        }

        // Navegação entre marmitas
        prevMarmitaBtn.addEventListener('click', () => {
            if (currentMarmitaIndex > 0) {
                currentMarmitaIndex--;
                updateMarmitaProgress();
                loadMarmitaOptions();
            }
        });

        nextMarmitaBtn.addEventListener('click', () => {
            // Verificar se todas as opções foram selecionadas para a marmita atual
            const currentMarmita = currentOrder.marmitas[currentMarmitaIndex];
            if (!currentMarmita.size || !currentMarmita.arroz || 
                !currentMarmita.feijao || currentMarmita.guarnicoes.length !== 2 || 
                !currentMarmita.carne) {
                alert('Por favor, selecione todas as opções para esta marmita antes de prosseguir');
                return;
            }
            
            if (currentMarmitaIndex < marmitaQuantity - 1) {
                currentMarmitaIndex++;
                updateMarmitaProgress();
                loadMarmitaOptions();
            }
        });

        // Voltar para quantidade
        prevToQuantityBtn.addEventListener('click', () => {
            etapaPersonalizacao.classList.add('hidden');
            document.getElementById('etapa-quantidade').classList.remove('hidden');
            
            // Atualizar indicador de etapas
            document.getElementById('step1').classList.add('active');
            document.getElementById('step2').classList.remove('active');
            document.getElementById('step1').classList.remove('completed');
        });

        // Avançar para bebidas
        nextToBebidasBtn.addEventListener('click', () => {
            // Verificar se todas as marmitas foram personalizadas
            const completedCount = currentOrder.marmitas.filter(m => 
                m.size && m.arroz && m.feijao && m.guarnicoes.length === 2 && m.carne
            ).length;
            
            if (completedCount !== marmitaQuantity) {
                alert('Por favor, complete a personalização de todas as marmitas antes de prosseguir');
                return;
            }
            
            // Todas as marmitas foram personalizadas, ir para bebidas
            etapaPersonalizacao.classList.add('hidden');
            etapaBebidas.classList.remove('hidden');
            
            // Atualizar indicador de etapas
            document.getElementById('step2').classList.remove('active');
            document.getElementById('step2').classList.add('completed');
            document.getElementById('step3').classList.add('active');
            
            loadBebidasOptions();
        });

        // Carregar opções de bebidas
        function loadBebidasOptions() {
            bebidasOptionsContainer.innerHTML = '';
            
            menuData.categories.bebidas.forEach(bebida => {
                const option = document.createElement('div');
                option.className = 'option-item bebida-item';
                
                // Verificar se esta bebida já está selecionada
                const existingBebida = currentOrder.bebidas.find(b => b.name === bebida.name);
                const quantity = existingBebida ? existingBebida.quantity : 0;
                
                option.innerHTML = `
                    <div style="font-weight: 600;">${bebida.name}</div>
                    <div class="marmita-price">R$ ${bebida.price.toFixed(2)}</div>
                    <div class="bebida-controls">
                        <button class="quantity-btn decrease-bebida" data-bebida="${bebida.name}" style="width: 35px; height: 35px; font-size: 1.2rem;">-</button>
                        <div class="bebida-quantity" id="quantity-${bebida.name.replace(/\s+/g, '-')}">${quantity}</div>
                        <button class="quantity-btn increase-bebida" data-bebida="${bebida.name}" style="width: 35px; height: 35px; font-size: 1.2rem;">+</button>
                    </div>
                `;
                
                // Adicionar eventos para os botões de quantidade
                const decreaseBtn = option.querySelector('.decrease-bebida');
                const increaseBtn = option.querySelector('.increase-bebida');
                
                decreaseBtn.addEventListener('click', () => updateBebidaQuantity(bebida, -1));
                increaseBtn.addEventListener('click', () => updateBebidaQuantity(bebida, 1));
                
                bebidasOptionsContainer.appendChild(option);
            });
        }

        // Atualizar quantidade de bebida
        function updateBebidaQuantity(bebida, change) {
            const existingIndex = currentOrder.bebidas.findIndex(b => b.name === bebida.name);
            let newQuantity = 0;
            
            if (existingIndex !== -1) {
                newQuantity = currentOrder.bebidas[existingIndex].quantity + change;
                if (newQuantity <= 0) {
                    // Remover bebida se quantidade for zero ou menos
                    currentOrder.bebidas.splice(existingIndex, 1);
                } else {
                    // Atualizar quantidade
                    currentOrder.bebidas[existingIndex].quantity = newQuantity;
                }
            } else if (change > 0) {
                // Adicionar nova bebida
                currentOrder.bebidas.push({
                    name: bebida.name,
                    price: bebida.price,
                    quantity: 1
                });
                newQuantity = 1;
            }
            
            // Atualizar display da quantidade
            const quantityElement = document.getElementById(`quantity-${bebida.name.replace(/\s+/g, '-')}`);
            if (quantityElement) {
                quantityElement.textContent = newQuantity > 0 ? newQuantity : 0;
            }
        }

        // Não desejo bebidas
        noBebidasBtn.addEventListener('click', () => {
            currentOrder.bebidas = [];
            // Atualizar display das quantidades
            menuData.categories.bebidas.forEach(bebida => {
                const quantityElement = document.getElementById(`quantity-${bebida.name.replace(/\s+/g, '-')}`);
                if (quantityElement) {
                    quantityElement.textContent = '0';
                }
            });
            
            // Avançar para a próxima etapa
            etapaBebidas.classList.add('hidden');
            etapaResumo.classList.remove('hidden');
            
            // Atualizar indicador de etapas
            document.getElementById('step3').classList.remove('active');
            document.getElementById('step3').classList.add('completed');
            document.getElementById('step4').classList.add('active');
            
            updateOrderSummary();
        });

        // Voltar para personalização
        prevToCustomizationBtn.addEventListener('click', () => {
            etapaBebidas.classList.add('hidden');
            etapaPersonalizacao.classList.remove('hidden');
            
            // Atualizar indicador de etapas
            document.getElementById('step3').classList.remove('active');
            document.getElementById('step2').classList.add('active');
            document.getElementById('step2').classList.remove('completed');
        });

        // Avançar para resumo
        nextToResumoBtn.addEventListener('click', () => {
            etapaBebidas.classList.add('hidden');
            etapaResumo.classList.remove('hidden');
            
            // Atualizar indicador de etapas
            document.getElementById('step3').classList.remove('active');
            document.getElementById('step3').classList.add('completed');
            document.getElementById('step4').classList.add('active');
            
            updateOrderSummary();
        });

        // Atualizar resumo do pedido
        function updateOrderSummary() {
            orderSummaryContent.innerHTML = '';
            
            let total = 0;
            
            // Marmitas
            currentOrder.marmitas.forEach((marmita, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'order-item';
                itemDiv.innerHTML = `
                    <div>
                        <strong>Marmita ${index + 1}: ${marmita.size === 'small' ? 'Pequena' : 'Grande'}</strong><br>
                        Arroz: ${marmita.arroz}<br>
                        Feijão: ${marmita.feijao}<br>
                        Guarnições: ${marmita.guarnicoes.join(', ')}<br>
                        Carne: ${marmita.carne}
                    </div>
                    <div>R$ ${marmita.price.toFixed(2)}</div>
                `;
                orderSummaryContent.appendChild(itemDiv);
                total += marmita.price;
            });
            
            // Bebidas
            if (currentOrder.bebidas.length > 0) {
                const bebidasTitle = document.createElement('div');
                bebidasTitle.innerHTML = '<strong>Bebidas:</strong>';
                bebidasTitle.style.marginTop = '1rem';
                orderSummaryContent.appendChild(bebidasTitle);
                
                currentOrder.bebidas.forEach(bebida => {
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'order-item';
                    itemDiv.innerHTML = `
                        <div>${bebida.name} x${bebida.quantity}</div>
                        <div>R$ ${(bebida.price * bebida.quantity).toFixed(2)}</div>
                    `;
                    orderSummaryContent.appendChild(itemDiv);
                    total += bebida.price * bebida.quantity;
                });
            }
            
            // Total
            const totalDiv = document.createElement('div');
            totalDiv.className = 'total';
            totalDiv.innerHTML = `<strong>Total: R$ ${total.toFixed(2)}</strong>`;
            orderSummaryContent.appendChild(totalDiv);
            
            currentOrder.total = total;
        }

        // Voltar para bebidas
        prevToBebidasBtn.addEventListener('click', () => {
            etapaResumo.classList.add('hidden');
            etapaBebidas.classList.remove('hidden');
            
            // Atualizar indicador de etapas
            document.getElementById('step4').classList.remove('active');
            document.getElementById('step3').classList.add('active');
            document.getElementById('step3').classList.remove('completed');
        });

        // Avançar para checkout
        nextToCheckoutBtn.addEventListener('click', () => {
            etapaResumo.classList.add('hidden');
            etapaCheckout.classList.remove('hidden');
            
            // Atualizar indicador de etapas
            document.getElementById('step4').classList.remove('active');
            document.getElementById('step4').classList.add('completed');
            document.getElementById('step5').classList.add('active');
        });

        // Voltar para resumo
        prevToResumoBtn.addEventListener('click', () => {
            etapaCheckout.classList.add('hidden');
            etapaResumo.classList.remove('hidden');
            
            // Atualizar indicador de etapas
            document.getElementById('step5').classList.remove('active');
            document.getElementById('step4').classList.add('active');
            document.getElementById('step4').classList.remove('completed');
        });

        // Alternar endereço de entrega
        deliveryTypeRadios.forEach(radio => {
            radio.addEventListener('change', () => {
                if (radio.value === 'entrega') {
                    deliveryAddress.classList.remove('hidden');
                    document.getElementById('customer-address').required = true;
                } else {
                    deliveryAddress.classList.add('hidden');
                    document.getElementById('customer-address').required = false;
                }
            });
        });

        // Selecionar forma de pagamento
        paymentOptions.forEach(option => {
            option.addEventListener('click', () => {
                paymentOptions.forEach(opt => {
                    opt.classList.remove('selected');
                });
                option.classList.add('selected');
                paymentMethodInput.value = option.getAttribute('data-payment');
                
                // Mostrar/ocultar opção de troco
                if (option.getAttribute('data-payment') === 'dinheiro') {
                    trocoSection.classList.remove('hidden');
                } else {
                    trocoSection.classList.add('hidden');
                }
            });
        });

        // CORREÇÃO DO WHATSAPP - Enviar pedido para WhatsApp
        checkoutForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            // Validar forma de pagamento
            if (!paymentMethodInput.value) {
                alert('Por favor, selecione uma forma de pagamento');
                return;
            }
            
            // Validar endereço se for entrega
            const deliveryType = document.querySelector('input[name="delivery-type"]:checked').value;
            if (deliveryType === 'entrega' && !document.getElementById('customer-address').value) {
                alert('Por favor, informe o endereço de entrega');
                return;
            }
            
            // Coletar informações do cliente
            currentOrder.customerInfo = {
                name: document.getElementById('customer-name').value,
                phone: document.getElementById('customer-phone').value,
                deliveryType: deliveryType,
                address: document.getElementById('customer-address').value,
                reference: document.getElementById('customer-reference').value,
                paymentMethod: paymentMethodInput.value,
                trocoPara: document.getElementById('troco-para').value
            };
            
            // Adicionar taxa de entrega se for entrega
            let totalComEntrega = currentOrder.total;
            if (deliveryType === 'entrega') {
                totalComEntrega += menuData.prices.delivery;
            }
            
            // Adicionar pedido à lista de pedidos
            const orderId = Date.now().toString();
            menuData.orders.push({
                id: orderId,
                ...currentOrder,
                timestamp: new Date().toISOString(),
                status: 'pendente'
            });
            
            saveData();
            
            // Preparar mensagem para WhatsApp
            let message = `*NOVO PEDIDO - Chalé Restaurante*%0A%0A`;
            message += `*Cliente:* ${currentOrder.customerInfo.name}%0A`;
            
            if (currentOrder.customerInfo.phone) {
                message += `*Telefone:* ${currentOrder.customerInfo.phone}%0A`;
            }
            
            message += `*Tipo de Entrega:* ${currentOrder.customerInfo.deliveryType === 'entrega' ? 'Entrega' : 'Retirada'}%0A`;
            
            if (currentOrder.customerInfo.deliveryType === 'entrega') {
                message += `*Endereço:* ${currentOrder.customerInfo.address}%0A`;
                if (currentOrder.customerInfo.reference) {
                    message += `*Referência:* ${currentOrder.customerInfo.reference}%0A`;
                }
            }
            
            message += `*Forma de Pagamento:* ${currentOrder.customerInfo.paymentMethod}%0A`;
            
            if (currentOrder.customerInfo.paymentMethod === 'dinheiro' && currentOrder.customerInfo.trocoPara) {
                message += `*Troco para:* R$ ${parseFloat(currentOrder.customerInfo.trocoPara).toFixed(2)}%0A`;
            }
            
            message += `%0A*ITENS DO PEDIDO:*%0A`;
            
            // Marmitas
            currentOrder.marmitas.forEach((marmita, index) => {
                message += `*Marmita ${index + 1}: ${marmita.size === 'small' ? 'Pequena' : 'Grande'}* - R$ ${marmita.price.toFixed(2)}%0A`;
                message += `  Arroz: ${marmita.arroz}%0A`;
                message += `  Feijão: ${marmita.feijao}%0A`;
                message += `  Guarnições: ${marmita.guarnicoes.join(', ')}%0A`;
                message += `  Carne: ${marmita.carne}%0A%0A`;
            });
            
            // Bebidas
            if (currentOrder.bebidas.length > 0) {
                message += `*BEBIDAS:*%0A`;
                currentOrder.bebidas.forEach(bebida => {
                    message += `${bebida.name} x${bebida.quantity} - R$ ${(bebida.price * bebida.quantity).toFixed(2)}%0A`;
                });
                message += `%0A`;
            }
            
            // Taxa de entrega
            if (currentOrder.customerInfo.deliveryType === 'entrega') {
                message += `Taxa de entrega: R$ ${menuData.prices.delivery.toFixed(2)}%0A`;
            }
            
            // Total
            message += `*TOTAL: R$ ${totalComEntrega.toFixed(2)}*%0A%0A`;
            message += `*Aguarde confirmação do pedido*`;
            
            // CORREÇÃO: Número de telefone corrigido
            const phone = "5531998725041"; // Número com código do país (55 = Brasil)
            const url = `https://wa.me/${phone}?text=${message}`;
            window.open(url, '_blank');
            
            // Resetar pedido
            resetOrderFlow();
            checkoutForm.reset();
            alert('Pedido enviado com sucesso!');
            
            // Voltar para a página inicial
            document.getElementById('orders').classList.remove('active');
            document.getElementById('home').classList.add('active');
            navLinks.forEach(nav => nav.classList.remove('active'));
            document.querySelector('[data-page="home"]').classList.add('active');
        });

        // Login administrativo
        loginAdminBtn.addEventListener('click', () => {
            const password = document.getElementById('admin-password').value;
            
            // Senha alterada para sgrgram2
            if (password === 'sgrgram2') {
                adminLogin.classList.add('hidden');
                adminContent.classList.remove('hidden');
                loadAdminContent();
            } else {
                alert('Senha incorreta!');
            }
        });

        // Carregar conteúdo administrativo
        function loadAdminContent() {
            // Preencher preços
            document.getElementById('price-small').value = menuData.prices.small;
            document.getElementById('price-large').value = menuData.prices.large;
            document.getElementById('delivery-fee').value = menuData.prices.delivery;
            
            // Carregar itens do menu
            loadMenuItems();
            
            // Carregar pedidos
            loadOrders();
        }

        // Salvar preços
        savePricesBtn.addEventListener('click', () => {
            menuData.prices.small = parseFloat(document.getElementById('price-small').value);
            menuData.prices.large = parseFloat(document.getElementById('price-large').value);
            menuData.prices.delivery = parseFloat(document.getElementById('delivery-fee').value);
            
            saveData();
            showAlert('Preços atualizados com sucesso!', 'success');
        });

        // Adicionar item ao menu
        addItemBtn.addEventListener('click', () => {
            const category = categorySelect.value;
            const name = document.getElementById('new-item-name').value;
            const price = document.getElementById('new-item-price').value;
            
            if (!name) {
                alert('Por favor, insira um nome para o item');
                return;
            }
            
            if (category === 'bebidas') {
                if (!price || parseFloat(price) <= 0) {
                    alert('Por favor, insira um preço válido para a bebida');
                    return;
                }
                
                menuData.categories.bebidas.push({
                    name: name,
                    price: parseFloat(price)
                });
            } else {
                menuData.categories[category].push(name);
            }
            
            saveData();
            loadMenuItems();
            
            // Limpar campos
            document.getElementById('new-item-name').value = '';
            document.getElementById('new-item-price').value = '';
            
            showAlert('Item adicionado com sucesso!', 'success');
        });

        // Carregar itens do menu no painel admin
        function loadMenuItems() {
            menuItemsContainer.innerHTML = '';
            
            // Para cada categoria
            Object.keys(menuData.categories).forEach(category => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'menu-category';
                categoryDiv.innerHTML = `<h3>${category.charAt(0).toUpperCase() + category.slice(1)}</h3>`;
                
                const itemsList = document.createElement('div');
                itemsList.className = 'menu-items';
                
                if (category === 'bebidas') {
                    menuData.categories.bebidas.forEach((item, index) => {
                        const itemDiv = document.createElement('div');
                        itemDiv.className = 'menu-item';
                        itemDiv.innerHTML = `
                            <div class="menu-item-header">
                                <div class="menu-item-name">${item.name}</div>
                                <div class="menu-item-price">R$ ${item.price.toFixed(2)}</div>
                            </div>
                            <div class="menu-item-actions">
                                <button class="btn btn-danger" onclick="removeMenuItem('${category}', ${index})">
                                    <i class="fas fa-trash"></i> Excluir
                                </button>
                            </div>
                        `;
                        itemsList.appendChild(itemDiv);
                    });
                } else {
                    menuData.categories[category].forEach((item, index) => {
                        const itemDiv = document.createElement('div');
                        itemDiv.className = 'menu-item';
                        itemDiv.innerHTML = `
                            <div class="menu-item-name">${item}</div>
                            <div class="menu-item-actions">
                                <button class="btn btn-danger" onclick="removeMenuItem('${category}', ${index})">
                                    <i class="fas fa-trash"></i> Excluir
                                </button>
                            </div>
                        `;
                        itemsList.appendChild(itemDiv);
                    });
                }
                
                categoryDiv.appendChild(itemsList);
                menuItemsContainer.appendChild(categoryDiv);
            });
        }

        // Remover item do menu
        window.removeMenuItem = function(category, index) {
            if (confirm('Tem certeza que deseja excluir este item?')) {
                menuData.categories[category].splice(index, 1);
                saveData();
                loadMenuItems();
                showAlert('Item excluído com sucesso!', 'success');
            }
        };

        // Carregar pedidos no painel admin
        function loadOrders() {
            ordersList.innerHTML = '';
            
            if (menuData.orders.length === 0) {
                ordersList.innerHTML = '<p>Nenhum pedido recebido ainda.</p>';
                return;
            }
            
            // Ordenar pedidos por data (mais recente primeiro)
            const sortedOrders = menuData.orders.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            sortedOrders.forEach(order => {
                const orderDiv = document.createElement('div');
                orderDiv.className = 'card';
                
                let orderContent = `
                    <div class="order-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h3>Pedido #${order.id.substring(order.id.length - 6)}</h3>
                        <div>${new Date(order.timestamp).toLocaleString('pt-BR')}</div>
                    </div>
                    <div class="order-details">
                        <p><strong>Cliente:</strong> ${order.customerInfo.name}</p>
                        ${order.customerInfo.phone ? `<p><strong>Telefone:</strong> ${order.customerInfo.phone}</p>` : ''}
                        <p><strong>Entrega:</strong> ${order.customerInfo.deliveryType === 'entrega' ? 'Entrega' : 'Retirada'}</p>
                        ${order.customerInfo.deliveryType === 'entrega' ? `<p><strong>Endereço:</strong> ${order.customerInfo.address}</p>` : ''}
                        ${order.customerInfo.reference ? `<p><strong>Referência:</strong> ${order.customerInfo.reference}</p>` : ''}
                        <p><strong>Pagamento:</strong> ${order.customerInfo.paymentMethod}</p>
                        ${order.customerInfo.paymentMethod === 'dinheiro' && order.customerInfo.trocoPara ? `<p><strong>Troco para:</strong> R$ ${parseFloat(order.customerInfo.trocoPara).toFixed(2)}</p>` : ''}
                        <p><strong>Status:</strong> <span class="order-status" style="font-weight: 700; color: ${getStatusColor(order.status)}">${order.status}</span></p>
                        
                        <h4 style="margin-top: 1.5rem;">Itens do Pedido:</h4>
                `;
                
                // Marmitas
                order.marmitas.forEach((marmita, index) => {
                    orderContent += `
                        <div class="order-item">
                            <strong>Marmita ${index + 1}: ${marmita.size === 'small' ? 'Pequena' : 'Grande'}</strong> - R$ ${marmita.price.toFixed(2)}<br>
                            Arroz: ${marmita.arroz}<br>
                            Feijão: ${marmita.feijao}<br>
                            Guarnições: ${marmita.guarnicoes.join(', ')}<br>
                            Carne: ${marmita.carne}
                        </div>
                    `;
                });
                
                // Bebidas
                if (order.bebidas.length > 0) {
                    orderContent += `<h4>Bebidas:</h4>`;
                    order.bebidas.forEach(bebida => {
                        orderContent += `<div class="order-item">${bebida.name} x${bebida.quantity} - R$ ${(bebida.price * bebida.quantity).toFixed(2)}</div>`;
                    });
                }
                
                // Taxa de entrega
                if (order.customerInfo.deliveryType === 'entrega') {
                    orderContent += `<div class="order-item">Taxa de entrega: R$ ${menuData.prices.delivery.toFixed(2)}</div>`;
                }
                
                orderContent += `
                    <div class="total">Total: R$ ${order.total.toFixed(2)}</div>
                `;
                
                orderContent += `
                    <div class="order-actions" style="display: flex; gap: 0.8rem; margin-top: 1.5rem;">
                        <button class="btn" onclick="updateOrderStatus('${order.id}', 'preparando')">
                            <i class="fas fa-utensils"></i> Em Preparação
                        </button>
                        <button class="btn btn-accent" onclick="updateOrderStatus('${order.id}', 'pronto')">
                            <i class="fas fa-check"></i> Pronto
                        </button>
                        <button class="btn btn-success" onclick="updateOrderStatus('${order.id}', 'entregue')">
                            <i class="fas fa-truck"></i> Entregue
                        </button>
                        <button class="btn btn-danger" onclick="removeOrder('${order.id}')">
                            <i class="fas fa-trash"></i> Excluir
                        </button>
                    </div>
                `;
                
                orderDiv.innerHTML = orderContent;
                ordersList.appendChild(orderDiv);
            });
        }

        // Obter cor do status
        function getStatusColor(status) {
            switch(status) {
                case 'pendente': return '#ffc107';
                case 'preparando': return '#17a2b8';
                case 'pronto': return '#28a745';
                case 'entregue': return '#6c757d';
                default: return '#6c757d';
            }
        }

        // Atualizar status do pedido
        window.updateOrderStatus = function(orderId, status) {
            const order = menuData.orders.find(o => o.id === orderId);
            if (order) {
                order.status = status;
                saveData();
                loadOrders();
                showAlert(`Status do pedido atualizado para: ${status}`, 'success');
            }
        };

        // Remover pedido
        window.removeOrder = function(orderId) {
            if (confirm('Tem certeza que deseja excluir este pedido?')) {
                menuData.orders = menuData.orders.filter(o => o.id !== orderId);
                saveData();
                loadOrders();
                showAlert('Pedido excluído com sucesso!', 'success');
            }
        };

        // Mostrar alerta
        function showAlert(message, type) {
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
                ${message}
            `;
            
            document.querySelector('.container').insertBefore(alert, document.querySelector('.page.active .card'));
            
            // Remover alerta após 5 segundos
            setTimeout(() => {
                alert.remove();
            }, 5000);
        }

        // Inicializar
        loadData();
    </script>
</body>
</html>
